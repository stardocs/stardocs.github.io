<!doctype html>
<html lang="en">
  <head>
  <title>Stardog 2.2.1 Docs: Programming with .Net</title>
  <script src="/js/libs/modernizr-2.6.2.min.js"></script>
  <meta charset="utf-8">
  <meta http-equiv="X-Powered-By" content="DocPad v6.44.0">
  <link rel="stylesheet" href="/css/gumby.css">
  <!--     //a block for ipad, etc... might should go in meta -->
  </head>

<body>
<!--
  <div class="" id="the-content">
    <div class="wrapper shaded" id="topblock">
    <div class="row">
      <div class="four columns">
        <a href="/"><img class="resrc" src="http://app.resrc.it/S=H55/R=L/http://docs.stardog.com/img/logotype.png"/></a>
      </div>
      <div class="eight columns">
        
      </div>
    </div>
  </div>
-->
<div id="page-wrap">
 <div id="the-content">
  <div id="theborder" class="wrapper">
    <!-- full bleed top border styling.... -->
      <div class="twelve columns"></div>
  </div>

    <div class="row">
        <div class="four columns stretch-container" id="sidebar1">
          <nav id="sidebar-nav-holder" class="fixed vertical-nav stretch-y" gumby-fixed="top">
            <div id="sidebar-logo">
              <a id="a52" style="text-decoration: none; background-color: none; border: none; color: none;" href="http://stardog.com/">
                <img id="thelogo" src="http://docs.stardog.com/img/sd.png">       
              </a>
            </div>
            
              <!-- 
	<h3 id="tochead">.Net Contents</h3>
 -->

<ul class="sidebar-nav">
    
    
    <!-- [data-target='-->
        <li>
            <a href="#sd-Introduction" class="skip" gumby-easing="easeOutQuad" gumby-duration="300" gumby-goto="#sd-Introduction">
            <strong>Introduction</strong>
        </a>
        <!-- <li><a href="#sd-Introduction" class="skiplink">Introduction</a> -->
            
                <ul class="sidebar-nav">
                
    

                </ul>
            
        </li>
    
    <!-- [data-target='-->
        <li>
            <a href="#sd-Creating-amp--Administering-Databases" class="skip" gumby-easing="easeOutQuad" gumby-duration="300" gumby-goto="#sd-Creating-amp--Administering-Databases">
            <strong>Creating &amp; Administering Databases</strong>
        </a>
        <!-- <li><a href="#sd-Creating-amp--Administering-Databases" class="skiplink">Creating &amp; Administering Databases</a> -->
            
                <ul class="sidebar-nav">
                
    

                </ul>
            
        </li>
    
    <!-- [data-target='-->
        <li>
            <a href="#sd-Connecting-to-a-Database" class="skip" gumby-easing="easeOutQuad" gumby-duration="300" gumby-goto="#sd-Connecting-to-a-Database">
            <strong>Connecting to a Database</strong>
        </a>
        <!-- <li><a href="#sd-Connecting-to-a-Database" class="skiplink">Connecting to a Database</a> -->
            
                <ul class="sidebar-nav">
                
    

                </ul>
            
        </li>
    
    <!-- [data-target='-->
        <li>
            <a href="#sd-Using-the-Storage-API" class="skip" gumby-easing="easeOutQuad" gumby-duration="300" gumby-goto="#sd-Using-the-Storage-API">
            <strong>Using the Storage API</strong>
        </a>
        <!-- <li><a href="#sd-Using-the-Storage-API" class="skiplink">Using the Storage API</a> -->
            
                <ul class="sidebar-nav">
                
    

                </ul>
            
        </li>
    
    <!-- [data-target='-->
        <li>
            <a href="#sd-Making-SPARQL-Queries" class="skip" gumby-easing="easeOutQuad" gumby-duration="300" gumby-goto="#sd-Making-SPARQL-Queries">
            <strong>Making SPARQL Queries</strong>
        </a>
        <!-- <li><a href="#sd-Making-SPARQL-Queries" class="skiplink">Making SPARQL Queries</a> -->
            
                <ul class="sidebar-nav">
                
    

                </ul>
            
        </li>
    
    <!-- [data-target='-->
        <li>
            <a href="#sd-Making-SPARQL-Updates" class="skip" gumby-easing="easeOutQuad" gumby-duration="300" gumby-goto="#sd-Making-SPARQL-Updates">
            <strong>Making SPARQL Updates</strong>
        </a>
        <!-- <li><a href="#sd-Making-SPARQL-Updates" class="skiplink">Making SPARQL Updates</a> -->
            
                <ul class="sidebar-nav">
                
    

                </ul>
            
        </li>
    
    <!-- [data-target='-->
        <li>
            <a href="#sd-dotNetRDF-Documentation" class="skip" gumby-easing="easeOutQuad" gumby-duration="300" gumby-goto="#sd-dotNetRDF-Documentation">
            <strong>dotNetRDF Documentation</strong>
        </a>
        <!-- <li><a href="#sd-dotNetRDF-Documentation" class="skiplink">dotNetRDF Documentation</a> -->
            
                <ul class="sidebar-nav">
                
    

                </ul>
            
        </li>
    

</ul>
              <p id="tocnav">
              
                <a class="iconlinks" href="/"><i style="padding-left:0px; margin-left:0px;" class="icon-home iconlinks"></i></a>&nbsp;
              
              <a href="#" id="" class="skip iconlinks" gumby-easing="easeInOutQuad" gumby-goto="top" gumby-duration="2000">
                <i style="padding-left:0px; margin-left:0px;" class="icon-publish iconlinks"></i>
              </a> &nbsp;
              <a href="https://twitter.com/stardog_db" class="iconlinks">
                <i style="padding-left:0px; margin-left:0px;" class="icon-twitter iconlinks"></i>
              </a>
              </p>
            
          </nav>
        </div>

        <div class="eight columns">
          <!-- woof! -->
            <div class="row">
              <p id="quote"><em><strong>Syntactic sugar causes cancer of the semicolon.</strong></em>&mdash;Alan Perlis, <cite>Epigrams in Programming</cite></p>
              <div class="pull_left"><h1 id="title-subhead">Programming with .Net</h1></div>
            </div>
          <!-- summary -->
          
          <div id="mdblock">
            <h2 id="sd-Introduction">Introduction</h2>
<p>In the <a href="../network/">Network Programming</a> chapter, we looked at 
how to interact with Stardog over a network via HTTP and SNARL
protocols.  In this chapter we describe how to program Stardog 
from .Net using <a href="http://www.dotnetrdf.org">dotNetRDF</a>.</p>
<p><strong>Note</strong>: this is an open source library developed and supported by third parties; 
questions or issues with the .Net API should be directed to
<a href="http://www.dotnetrdf.org">dotNetRDF</a>.</p>
<p>You should also be aware that dotNetRDF uses the HTTP API for all
communication with Stardog so you <strong>must</strong> enable 
the HTTP server to use Stardog from .Net. It's enabled by 
default so most users should not need to do anything to fulfill
this requirement.</p>
<p>If you're a Java developer see the <a href="../java">Programming with Java</a>
chapter.  Alternatively If you're a Spring developer, you might want
to read the <a href="../spring">Programming with Spring</a> chapter.  If you 
prefer a ORM-style approach, you might want to use 
<a href="https://github.com/mhgrove/Empire">Empire</a>, which is an implementation
of <a href="http://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html">JPA</a> 
for RDF that works with Stardog.</p>
<h2 id="sd-Creating-amp--Administering-Databases">Creating &amp; Administering Databases</h2>
<p>The <code>StardogServer</code> class provides some limited administrative functionality by
implementing the dotNetRDF <a href="https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Storage/Servers">Servers API</a></p>
<p>dotNetRDF actually provides several classes for administering a Stardog server:</p>
<ul>
<li><a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.Management.StardogServer">StardogServer</a> - Connection for the current version of Stardog</li>
<li><a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.Management.StardogV2Server">StardogV2Server</a> - Connection for Stardog V2 servers</li>
<li><a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.Management.StardogV1Server">StardogV1Server</a> - Connection for Stardog V1 servers</li>
</ul>
<p>This provides backwards compatibility for users who wish to communicate with 
older versions of Stardog.  Using the wrong connector for the version of 
Stardog you are running may result in errors.</p>
<h3>Creating a Database</h3>
<p>You can create a basic disk-backed database with Stardog with one line of code:</p>
<script src="https://gist.github.com/5732640.js"></script>

<p>It is important to note that, as shown in the examples, you <strong>should</strong> take care
to always dispose of the <code>IStorageServer</code> and/or <code>IStorageProvider</code> instances you
create when you are done working with them.</p>
<p>You can also use the <code>StardogDiskTemplate</code> or <code>StardogMemTemplate</code> to configure a 
disk or memory-backed database with whatever options you desire; they both derive 
from <code>BaseStardogTemplate</code> which contains many properties that can be used 
to configure Stardog database options:</p>
<script src="https://gist.github.com/5732680.js"></script>

<p>This illustrates how to create a disk backed database named ‘id’ which supports 
<a href="../using/#sd-Searching">full text search</a> and has durable transactions
enabled.</p>
<p>The following shows how to create a disk backed database with ICV guard mode enabled
 at the QL reasoning type.  For more information on what the available
properties are see <a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.Management.Provisioning.Stardog.BaseStardogTemplate">BaseStardogTemplate</a>,
for what they mean to Stardog please refer to the <a href="../admin/">admin docs</a>, 
specifically the section on administering a database.</p>
<script src="https://gist.github.com/5732690.js"></script>

<p>For performing other basic administrative tasks via dotNetRDF please refer to the
<a href="https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Storage/Servers">Servers API</a> documentation. Also note, Stardog database administration can be performed from the 
<a href="../admin/">command line</a> which is substantially more powerful and 
supports bulk loading of data at database creation time which 
dotNetRDF does not currently support.</p>
<h2 id="sd-Connecting-to-a-Database">Connecting to a Database</h2>
<p>Connecting to a database can be done using the dotNetRDF <a href="https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Storage%20API">Storage API</a>,
this provides a <a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.StardogConnector">StardogConnector</a>
which implements their <code>IStorageProvider</code> interface.</p>
<p>Making a connection requires at a minimum knowing the Base URI of your Stardog server 
and the name of the database.  The Base URI is the HTTP URL that Stardog prints 
out when you start up the server and is typically of the form <code>http://machine:5820</code>
where <code>machine</code> is replaced with the name of the host on which the server
is running and <code>5820</code> changed only if you have configured Stardog to run 
on a different HTTP port than the default.  As Stardog implements comprehensive 
<a href="../security/">security</a>, you will also likely require user credentials.</p>
<script src="https://gist.github.com/5732808.js"></script>

<p>dotNetRDF actually provides several classes for connecting to a Stardog server:</p>
<ul>
<li><a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.StardogConnector">StardogConnector</a> - Connection for the current version of Stardog</li>
<li><a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.StardogV2Connector">StardogV2Connector</a> - Connection for Stardog V2 servers</li>
<li><a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.StardogV1Connector">StardogV1Connector</a> - Connection for Stardog V1 servers</li>
</ul>
<p>This provides backwards compatibility for users who wish to communicate with older 
versions of Stardog.  Using the wrong connector for the version of Stardog you
are running may result in errors.</p>
<p>Connections to Stardog also allow you to specify the reasoning mode used for queries 
as part of the connection information like so:</p>
<script src="https://gist.github.com/5732812.js"></script>

<p>Note that is it possible to change the reasoning mode used at any time by
changing the value of the <code>Reasoning</code> property, <em>though remember that this 
only affects subsequently issued queries i.e. it does not affect queries
that are already in-flight</em>.</p>
<h2 id="sd-Using-the-Storage-API">Using the Storage API</h2>
<p>This section covers how to carry out various common operations against Stardog 
using dotNetRDF's <a href="https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Storage%20API">Storage API</a>, you may wish to refer to their 
<a href="https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Triple%20Store%20Integration">Triple Store Integration</a> documentation for some more generic examples of
using this API.</p>
<p>When using this API transactions are primarily handled for you with the connection 
operating in auto-commit mode by default, any write operations will automatically use 
a new transaction and commit or roll it back as appropriate.</p>
<p>Transactions may be manually managed using the <code>Begin()</code>, <code>Commit()</code> and <code>Rollback()</code> 
methods, and read operations will only use transactions when they run in the context of 
an active transaction.</p>
<h3>Adding Data</h3>
<p>The simplest way to add data is to call the <code>SaveGraph()</code> method which saves a RDF 
graph to the store.</p>
<script src="https://gist.github.com/5786144.js"></script>

<p>By default, RDF added will go to the named graph corresponding to the <code>BaseUri</code> 
property of the provided graph unless it is <code>null</code> in which case it gets added
to the default graph.</p>
<p>When you use the <code>SaveGraph()</code> method the exact behaviour depends on the target 
graph, saving to the default graph appends data while saving to named graph 
overwrites data.  You can inspect the <code>IOBehaviour</code> property to see all flags 
that apply to Stardog connectivity when used via dotNetRDF.</p>
<h3>Modifying Data</h3>
<p>If you want to add or remove data from an existing graph, then you can use the 
<code>UpdateGraph()</code> method, which takes a URI for the graph to update and collections 
of triples to be added and removed.  <em>Note that removals are always processed 
before additions</em>.</p>
<script src="https://gist.github.com/5833189.js"></script>

<h3>Loading Data</h3>
<p>Since the <code>IStorageProvider</code> API is primarily graph-oriented the simplest way 
to load data is to load an entire graph from a database:</p>
<script src="https://gist.github.com/5786161.js"></script>

<p>If you need more fine grained control over loading data then you should make 
an appropriate SPARQL Query as detailed later in this chapter.</p>
<h3>Removing Data</h3>
<p>As previously mentioned the <code>IStorageProvider</code> API is graph-oriented, you can
delete an entire graph from your Stardog database using the <code>DeleteGraph()</code>
method:</p>
<script src="https://gist.github.com/7230262.js"></script>

<p>Alternatively if you want to remove specific triples you should use the 
<code>UpdateGraph()</code> method as already shown in the earlier Modifying Data section</p>
<h2 id="sd-Making-SPARQL-Queries">Making SPARQL Queries</h2>
<p>You can make a SPARQL query simply by calling the <code>Query()</code> method which is
from the <a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.IQueryableStorage">IQueryableStorage</a>
interface.  SPARQL queries may be passed in directly as strings like so:</p>
<script src="https://gist.github.com/7230219.js"></script>

<p>We <strong>strongly</strong> recommend the use of the parameterized query support over 
concatenating strings together in order to build your SPARQL query.  This 
latter approach opens up the possibility for SPARQL injection attacks 
unless you are very careful in scrubbing your input.  This can be done using
the <a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Query.SparqlParameterizedString">SparqlParameterizedString</a>
class like so:</p>
<script src="https://gist.github.com/7230407.js"></script>

<p>dotNetRDF uses the ADO.Net style <code>@param</code> to specify parameters in the query string
which then must have values set for them using the relevant methods prior to calling
<code>ToString()</code> to retrieve the final query string.</p>
<h3>Reasoning</h3>
<p>Stardog supports various levels of reasoning by using a query rewriting technique.
In short, when reasoning is requested, a query is automatically rewritten into <em>n</em> 
queries, which are then executed. As mentioned earlier reasoning is enabled at the 
<code>StardogConnector</code> layer and then any queries executed over that connection are 
executed with reasoning enabled; you don't need to do anything up front when you 
create your database if you want to use reasoning.  The in-use reasoning mode for 
your connection may be changed at any time by setting the <code>Reasoning</code> property 
appropriately.</p>
<p>For more information on how reasoning is supported in Stardog, check out the 
<a href="../owl2/">reasoning section</a></p>
<h2 id="sd-Making-SPARQL-Updates">Making SPARQL Updates</h2>
<p>From dotNetRDF 1.0.3 onwards it is possible to make native SPARQL updates against Stardog 
when using the <code>StardogV2Connector</code> or the <code>StardogConnector</code>.  SPARQL Updates are
made simply by calling the <code>Update()</code> method which is from the 
<a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Storage.IUpdateableStorage">IUpdateableStorage</a>
interface.  SPARQL Updates may be passed in directly as strings like so:</p>
<script src="https://gist.github.com/8019566.js"></script>

<p>We <strong>strongly</strong> recommend the use of the parameterized update support over 
concatenating strings together in order to build your SPARQL update.  This 
latter approach opens up the possibility for SPARQL injection attacks 
unless you are very careful in scrubbing your input.  This can be done using
the <a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Query.SparqlParameterizedString">SparqlParameterizedString</a>
class like so:</p>
<script src="https://gist.github.com/8019591.js"></script>

<p>dotNetRDF uses the ADO.Net style <code>@param</code> to specify parameters in the query string
which then must have values set for them using the relevant methods prior to calling
<code>ToString()</code> to retrieve the final query string.</p>
<h3>Approximating Stardog Updates</h3>
<p>Even when using older versions of dotNetRDF or older versions of Stardog which do not
support SPARQL Update natively it is still possible to perform SPARQL Updates on
Stardog using dotNetRDF's approximated update support.</p>
<p>To do this you create a <a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Update.GenericUpdateProcessor">GenericUpdateProcessor</a>
instance which wraps your <code>IStorageProvider</code> instance.  This provides a <code>ProcessCommandSet()</code>
method which takes in a <a href="http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Update.SparqlUpdateCommandSet">SparqlUpdateCommandSet</a>
instance and executes it against the underlying store.  Where the underlying store does
not support SPARQL Update natively it does its best to translate the update commands into
their equivalent Storage API operations to execute the update as faithfully as possible.</p>
<script src="https://gist.github.com/8019694.js"></script>

<p><strong>Note:</strong> You can safely use the <code>GenericUpdateProcessor</code> even with newer versions of
dotNetRDF and Stardog where native SPARQL Update is supported since if the underlying
store supports SPARQL Update natively the <code>GenericUpdateProcessor</code> delegates execution
to the stores <code>Update()</code> method.</p>
<h2 id="sd-dotNetRDF-Documentation">dotNetRDF Documentation</h2>
<p>Please see the <a href="http://www.dotnetrdf.org/api/">dotNetRDF API</a> docs for more detailed
information on the available APIs or see the <a href="http://bitbucket.org/dotnetrdf/dotnetrdf/wiki/User%20Guide">dotNetRDF User Guide</a>
for a more general overview of dotNetRDF.</p>

          </div>
          <div class="hidden" id="footnote-container">
            <h2>Notes</h2>
          </div>
        </div>
    </div>
  </div>
</div>


<div class="wrapper shaded" id="subfoot">
      <section class="row">
        <div class="twelve columns">
            <div class="four columns">
              <a style="text-decoration: none; border-bottom: 0;" href="http://clarkparsia.com/"><img id="footer-logo" style="max-width: 50%;" src="/img/cp.png"></a>
              <div> </div>
              <!-- follow us on Twitter -->
            </div>
            <div class="eight columns">
              
                <h4>This is <span id="footer-subhead">Programming with .Net</span>, part of <a href="http://docs.stardog.com/">Stardog Docs</a> 2.2.1.</h4>
              
              <p class="copywood">For comments, questions, or to report problems with this page, visit the <a href="https://groups.google.com/a/clarkparsia.com/group/stardog/about">Stardog Support Forum</a>.</p>
              <p class="copywood">&copy;2010&ndash;2014 Clark &amp; Parsia LLC. <a href="http://creativecommons.org/licenses/by-sa/3.0/">Some rights reserved</a>.
            </p></div>
        </div>
      </section>
</div>

<script defer="defer" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script defer="defer" src="/js/libs/gumby.js"></script><script defer="defer" src="/js/libs/ui/gumby.fittext.js"></script><script defer="defer" src="/js/libs/ui/gumby.fixed.js"></script><script defer="defer" src="/js/libs/ui/gumby.navbar.js"></script><script defer="defer" src="/js/libs/ui/gumby.retina.js"></script><script defer="defer" src="/js/libs/ui/gumby.skiplink.js"></script><script defer="defer" src="/js/libs/ui/gumby.tabs.js"></script><script defer="defer" src="/js/libs/ui/gumby.toggleswitch.js"></script><script defer="defer" src="/js/libs/gumby.init.js"></script><script defer="defer" src="/js/plugins.js"></script><script defer="defer" src="/js/main.js"></script>

</body>

</html>